<!-- location-master.html - 拠点マスタ管理ページ -->
<div class="location-master-container">
  <!-- ポップアップメッセージ -->
  <div id="popupMessage" class="popup-message"></div>
  
  <div class="page-header">
    <h1><i class="fas fa-map-marker-alt"></i> 拠点マスタ管理</h1>
    <p>システムで使用する拠点情報を管理します</p>
  </div>

  <!-- 操作ボタン -->
  <div class="action-buttons">
    <button type="button" class="btn btn-primary" onclick="showAddLocationModal()">
      <i class="fas fa-plus"></i>
      新規拠点追加
    </button>
    <button type="button" class="btn btn-info" onclick="refreshLocationList()">
      <i class="fas fa-sync-alt"></i>
      更新
    </button>
  </div>

  <!-- 拠点一覧テーブル -->
  <div class="location-list-container">
    <div class="table-responsive">
      <table class="table table-striped" id="locationTable">
        <thead>
          <tr>
            <th>拠点ID</th>
            <th>拠点名</th>
            <th>拠点コード</th>
            <th>管轄</th>
            <th>グループメールアドレス</th>
            <th>ステータス変更通知</th>
            <th>ステータス</th>
            <th>作成日</th>
            <th>更新日</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody id="locationTableBody">
          <!-- 動的に生成 -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- 拠点追加・編集モーダル -->
  <div id="locationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">新規拠点追加</h3>
        <span class="close" onclick="closeLocationModal()">&times;</span>
      </div>
      <div class="modal-body">
        <form id="locationForm">
          <input type="hidden" id="editLocationId" name="editLocationId">
          
          <div class="form-group">
            <label for="locationId">
              拠点ID <span class="required">*</span>
            </label>
            <input type="text" id="locationId" name="locationId" required 
                   placeholder="例: osaka" pattern="[a-z0-9_-]+" 
                   title="小文字英数字、ハイフン、アンダースコアのみ使用可能">
            <small class="help-text">小文字英数字、ハイフン、アンダースコアのみ使用可能</small>
          </div>

          <div class="form-group">
            <label for="locationName">
              拠点名 <span class="required">*</span>
            </label>
            <input type="text" id="locationName" name="locationName" required 
                   placeholder="例: 大阪">
          </div>

          <div class="form-group">
            <label for="locationCode">
              拠点コード <span class="required">*</span>
            </label>
            <input type="text" id="locationCode" name="locationCode" required 
                   placeholder="例: OSAKA" maxlength="20" pattern="[A-Z]+">
            <small class="help-text">大文字英語のみ使用可能（数字不可）</small>
          </div>

          <div class="form-group">
            <label for="jurisdiction">
              管轄 <span class="required">*</span>
            </label>
            <input type="text" id="jurisdiction" name="jurisdiction" required 
                   placeholder="例: 関西" maxlength="50">
            <small class="help-text">管轄エリア名（関西、関東、九州など）</small>
          </div>

          <div class="form-group">
            <label for="groupEmail">
              グループメールアドレス <span class="required">*</span>
            </label>
            <input type="email" id="groupEmail" name="groupEmail" required
                   placeholder="例: test-group@example.com" maxlength="100">
            <small class="help-text">課のグループメールアドレスを入力してください</small>
          </div>

          <div class="form-group">
            <label for="statusChangeNotification">
              ステータス変更通知
            </label>
            <div class="checkbox-wrapper">
              <input type="checkbox" id="statusChangeNotification" name="statusChangeNotification">
              <label for="statusChangeNotification" class="checkbox-label">
                ステータス変更時に通知を送信する
              </label>
            </div>
            <small class="help-text">チェックを入れると、この拠点の機器のステータスが変更された際に通知メールが送信されます</small>
          </div>

          <div class="form-group">
            <label for="locationStatus">
              ステータス <span class="required">*</span>
            </label>
            <select id="locationStatus" name="status" required>
              <option value="active">有効</option>
              <option value="inactive">無効</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeLocationModal()">
          キャンセル
        </button>
        <button type="button" class="btn btn-primary" onclick="saveLocation()">
          <i class="fas fa-save"></i>
          保存
        </button>
      </div>
    </div>
  </div>
</div>