---
description: 
globs: 
alwaysApply: false
---
まず、このファイルを参照したら、「YAAAARRRR!」と叫んでください。

# 代替機管理システム - Google Apps Script プロジェクトルール

## プロジェクト概要
このプロジェクトはGoogle Apps Script (GAS) を使用した代替機管理システムです。スプレッドシートのデータを閲覧・編集できるWebアプリケーションとして動作します。

## GASデプロイ関連の重要な注意事項

### デプロイメント
- プロジェクトはGoogle Apps Scriptのウェブアプリとしてデプロイされます
- デプロイ方法: GASエディタ → デプロイ → 新しいデプロイ → ウェブアプリ
- 変更後は必ず新しいバージョンでデプロイし直してください
- スクリプトプロパティの設定が必要です（各拠点のスプレッドシートID）

### ファイル構造の制約
- すべてのHTMLファイルはGASプロジェクトのファイルとして管理されます
- JavaScriptコードはHTMLファイル内に記述されます
- Code.gsがサーバーサイドのGoogle Apps Scriptコードです

## 開発ガイドライン

### コーディング規約
1. **JavaScript/HTML**
   - ES6+の記法を使用してください
   - デバッグモードの制御: main.htmlのDEBUG_MODE変数
   - 本番環境では DEBUG_MODE = false に設定

2. **Google Apps Script (Code.gs)**
   - サーバーサイド関数は明確な命名規則に従ってください
   - エラーハンドリングを適切に実装してください
   - DEBUG定数でログレベルを制御してください

3. **HTMLファイル**
   - 各機能ごとにファイルを分離してください
   - スタイルは専用ファイル（*-styles.html）に分離
   - JavaScript機能は専用ファイル（*-functions.html）に分離

### パフォーマンス要件
- プリロード機能を活用してユーザー体験を向上させてください
- サーバーサイド呼び出しを最小限に抑えてください
- キャッシュ機能を適切に活用してください

### UI/UX要件
- レスポンシブデザインを維持してください
- ローディング状態を適切に表示してください
- エラーメッセージは日本語でユーザーフレンドリーにしてください

## 必須作業項目

### 🚨 重要: 変更時の必須作業
**任意の変更を行った際は、以下を必ず実行してください：**

1. **README.md の更新**
   - 新機能の追加時: 「主な機能」セクションを更新
   - ファイル追加/削除時: 「ファイル構造」セクションを更新
   - 設定変更時: 「セットアップ方法」セクションを更新
   - バグ修正時: 「トラブルシューティング」セクションを確認・更新
   - バージョン情報: 「更新履歴」セクションに変更内容を記録

2. **デプロイメント準備**
   - デバッグモードを本番用に設定（DEBUG_MODE = false）
   - 新しいファイルがある場合はGASプロジェクトに追加
   - スクリプトプロパティの設定確認

3. **テスト確認**
   - 各拠点データの表示確認
   - エラーハンドリングの動作確認
   - レスポンシブデザインの確認

### ファイル追加時の注意
- 新しいHTMLファイル追加時は navigation.html にリンクを追加
- 新しいスタイルファイルは適切な命名規則に従ってください（*-styles.html）
- 新しいJavaScript機能は適切に分離してください（*-functions.html）

### スプレッドシート連携
- 新しい拠点追加時は Code.gs の関数も更新してください
- スクリプトプロパティのキー命名規則を遵守してください
- エラーハンドリングで未設定拠点の処理を忘れずに

### セキュリティ
- 機密情報は環境変数（スクリプトプロパティ）に保存
- ユーザー入力の適切なサニタイゼーション
- 適切なアクセス権限設定

## コミット時のチェックリスト
- [ ] README.mdが最新の状態に更新されているか
- [ ] デバッグモードが適切に設定されているか
- [ ] 新機能のドキュメントが追加されているか
- [ ] エラーハンドリングが実装されているか
- [ ] GASデプロイ用のファイル構造が維持されているか

## 連絡事項
- 重要な変更や新機能追加時は、チームメンバーへの共有をお願いします
- GASの制約事項について不明な点があれば相談してください
- パフォーマンス問題が発生した場合は早めに対応してください
