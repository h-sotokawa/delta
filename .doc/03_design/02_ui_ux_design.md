# UI/UX 設計書

## 1. 設計原則

### 1.1 基本理念

- **使いやすさ第一**: 専門知識不要での直感的操作
- **効率性重視**: 最小クリックでの目的達成
- **一貫性確保**: 全画面での統一されたユーザー体験
- **アクセシビリティ**: 誰もが利用可能なインターフェース

### 1.2 デザイン原則

#### 1.2.1 視覚的階層

- **重要度順**: 主要機能を上位・中央に配置
- **グルーピング**: 関連機能の視覚的グループ化
- **コントラスト**: 重要な情報の強調表示

#### 1.2.2 ユーザビリティ

- **予測可能性**: 期待される動作の実装
- **フィードバック**: ユーザー操作に対する明確な応答
- **エラー防止**: 誤操作を防ぐ UI 設計

#### 1.2.3 レスポンシブ対応

- **モバイルファースト**: スマートフォンを基準とした設計
- **フレキシブルレイアウト**: 画面サイズに応じた最適表示
- **タッチ対応**: タッチ操作に適したサイズ・間隔

## 2. 画面構成・レイアウト

### 2.1 全体レイアウト

```
┌─────────────────────────────────────────┐
│             Header Navigation           │ ← 固定ヘッダー
├─────────────────────────────────────────┤
│                                         │
│            Main Content Area            │ ← メインコンテンツ
│                                         │
│                                         │
└─────────────────────────────────────────┘
```

### 2.2 ヘッダーナビゲーション

#### 2.2.1 構成要素

- **ロゴ/タイトル**: 左端、ホームへのリンク
- **メインナビ**: 中央、主要機能へのリンク
- **ユーザー情報**: 右端、ログイン状態表示

#### 2.2.2 ナビゲーション項目

```
代替機管理システム | ダッシュボード | 統合ビューアー | URL生成 |
マスタ管理 | 設定 | [ユーザー名]
```

**注記**: 「スプレッドシート」から「統合ビューアー」に名称変更

- 拠点別詳細シートの廃止に伴う表現変更
- 統合データ表示の新機能を反映

### 2.3 メインコンテンツエリア

#### 2.3.1 ページヘッダー

- **ページタイトル**: 大きなフォント、アイコン付き
- **説明文**: ページの目的・機能説明
- **ブレッドクラム**: 現在位置の表示

#### 2.3.2 コンテンツセクション

- **セクション分割**: 機能別の明確な区分
- **カード型レイアウト**: 各機能のカード表示
- **アクションエリア**: ボタン・フォームの配置

## 3. 画面別 UI 設計

### 3.1 ダッシュボード画面

#### 3.1.1 レイアウト

```
┌─────────────────────────────────────────┐
│ 🏠 代替機管理システムダッシュボード        │
│   関西フィールドサービス課               │
├─────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐    │
│ │📊 統合  │ │🔗 URL  │ │⚙️ 機種  │    │
│ │ビューアー │ │ 生成   │ │ マスタ │    │
│ │(全デバイス)│ │        │ │        │    │
│ └─────────┘ └─────────┘ └─────────┘    │
│ ┌─────────┐ ┌─────────┐              │
│ │📍 拠点  │ │⚙️ システ│              │
│ │ マスタ │ │ム設定  │              │
│ │        │ │        │              │
│ └─────────┘ └─────────┘              │
└─────────────────────────────────────────┘
```

#### 3.1.2 機能カード設計

- **カードサイズ**: 200px × 150px（デスクトップ）
- **アイコン**: Font Awesome、32px
- **タイトル**: 16px、太字
- **説明**: 14px、グレー
- **ホバー効果**: 影とスケール変化

### 3.2 スプレッドシートビューアー画面

#### 3.2.1 レイアウト（統合データ表示）

```
┌─────────────────────────────────────────┐
│ 📊 スプレッドシートビューアー             │
├─────────────────────────────────────────┤
│ 拠点選択: [▼ 大阪営業所]                 │
│ デバイス種別: [▼ 全て] [🔄更新]          │
│ 選択項目操作: [📝ステータス編集] [📊集計] │
├─────────────────────────────────────────┤
│ ┌─┬─────┬─────┬─────┬─────┬─────┐   │
│ │✓│種別 │機種名│製造番号│状態│担当者│   │
│ ├─┼─────┼─────┼─────┼─────┼─────┤   │
│ │ │端末 │Think │ABC123│貸出中│田中 │   │
│ │ │    │Pad  │     │     │    │   │
│ ├─┼─────┼─────┼─────┼─────┼─────┤   │
│ │✓│プリ │Multi │XYZ789│保管中│佐藤 │   │
│ │ │ンタ │Func │     │     │[編集]│   │
│ └─┴─────┴─────┴─────┴─────┴─────┘   │
│           [< 前へ] [次へ >]              │
└─────────────────────────────────────────┘
```

#### 3.2.2 統合データ表示設計

- **デバイス種別列**: 端末・プリンタ・その他を視覚的に区別
- **動的ラベル**: デバイス種別に応じた表示ラベル
- **フィルタリング**: デバイス種別での絞り込み機能
- **統一表示**: 全マスタデータの一元管理表示

#### 3.2.3 デバイス種別表示

#### 3.2.4 フィルタ機能

- **デバイス種別フィルタ**: 全て/端末/プリンタ/その他
- **状態フィルタ**: 利用中/待機中/故障/その他
- **検索機能**: 機種名・製造番号での検索
- **複合フィルタ**: 複数条件での絞り込み

#### 3.2.5 データテーブル設計

- **ヘッダー**: 固定、ソート可能アイコン
- **行選択**: チェックボックス、行ハイライト
- **奇偶行**: 交互の背景色で視認性向上
- **モバイル**: 横スクロール対応
- **レスポンシブカラム**: 画面サイズに応じた列表示

#### 3.2.6 統合表示のメリット

**従来の課題（拠点別詳細シート）**:

- 各拠点で複数シートの管理が必要
- データの一貫性確保が困難
- シート間の移動が煩雑
- 全体的な在庫状況の把握が困難

**新しい統合アプローチ**:

- **単一画面での一元管理**: 全デバイス情報を 1 つの画面で表示
- **効率的なフィルタリング**: 必要な情報への素早いアクセス
- **一貫したユーザー体験**: シート切り替え不要の直感的な操作
- **データ整合性の向上**: 単一データソースによる信頼性確保
- **検索・ソート機能**: 横断的なデータ検索とソート機能

#### 3.2.7 預り機ステータス編集機能

**条件チェック表示**:

```
┌─────────────────────────────────────────┐
│ 📝 預り機ステータス編集                  │
├─────────────────────────────────────────┤
│ 設定条件チェック:                       │
│ ✅ 0-4.ステータス: 1.貸出中             │
│ ✅ 1-4.ユーザー機の預り有無: 有り       │
│ → 預り機ステータス編集可能              │
├─────────────────────────────────────────┤
│ 選択項目: 3台（条件満たす: 2台）         │
│ 新しい預り機ステータス: [▼ 1.返却可能] │
│ 変更理由: [____________]                 │
│ [キャンセル] [一括更新]                  │
└─────────────────────────────────────────┘
```

**個別編集 UI（編集可能）**:

```
┌─────────────────────────────────────────┐
│ 🔧 OSA_SV_ThinkPad_ABC123_001           │
├─────────────────────────────────────────┤
│ 前提条件:                               │
│ • 0-4.ステータス: 1.貸出中              │
│ • 1-4.ユーザー機の預り有無: 有り        │
├─────────────────────────────────────────┤
│ 現在の預り機ステータス: 3.お客様による返却拒否 │
│ 新しい預り機ステータス: [▼ステータス選択] │
│ ┌─ 利用可能ステータス ──────────────┐   │
│ │ 1.返却可能                         │   │
│ │ 2.商談や金額の問題で返却不可       │   │
│ │ 3.お客様による返却拒否             │   │
│ │ 4.HW延長保守中(OS入れ替えやサービス終了を含む) │   │
│ │ (空白 - ステータスなし)            │   │
│ └─────────────────────────────────┘   │
│ 変更理由: [________________________]    │
│ [キャンセル] [更新]                      │
└─────────────────────────────────────────┘
```

**個別編集 UI（編集不可）**:

```
┌─────────────────────────────────────────┐
│ 🔧 OSA_Printer_MFP_XYZ123_001           │
├─────────────────────────────────────────┤
│ 前提条件:                               │
│ • 0-4.ステータス: 2.回収後社内保管      │
│ • 1-4.ユーザー機の預り有無: 無し        │
├─────────────────────────────────────────┤
│ 預り機ステータス: (設定不可)             │
│ [▼ ────────────] ← グレーアウト        │
│                                         │
│ ⚠️ 預り機ステータスを設定するには:       │
│   1. 0-4.ステータスを"1.貸出中"に変更   │
│   2. 1-4.ユーザー機の預り有無を"有り"に変更 │
│                                         │
│ [閉じる]                                │
└─────────────────────────────────────────┘
```

**変更履歴表示**:

```
┌─────────────────────────────────────────┐
│ 📜 ステータス変更履歴                    │
├─────────────────────────────────────────┤
│ 2024/07/15 14:30 田中太郎               │
│ 3.お客様による返却拒否 → 1.返却可能 │
│ 理由: 顧客要求により緊急貸出             │
│ ─────────────────────────────────────── │
│ 2024/07/10 09:15 佐藤花子               │
│ 2.商談や金額の問題で返却不可 → 3.お客様による返却拒否   │
│ 理由: 商談終了により社内保管へ           │
│ ─────────────────────────────────────── │
│ [もっと見る]                            │
└─────────────────────────────────────────┘
```

#### 3.2.8 統合データ表示の技術実装

**データソース統合**:

**動的表示制御**:

**フィルタリング機能**:

### 3.3 URL 生成画面

#### 3.3.1 レイアウト

```
┌─────────────────────────────────────────┐
│ 🔗 共通フォームURL生成                   │
├─────────────────────────────────────────┤
│ 📝 拠点管理番号の生成                    │
│                                         │
│ 拠点: [▼ 大阪]                           │
│ カテゴリ: [▼ Server]                    │
│ モデル: [▼ ThinkPad-X1-Carbon]         │
│ 製造番号: [ABC123456_____]               │
│ 連番: [001]                             │
├─────────────────────────────────────────┤
│ 📝 端末属性（端末系カテゴリの場合のみ）  │
│                                         │
│ ソフトウェア*: [Office 2021______]       │
│ OS*: [Windows 11_________]              │
│ 資産管理番号*: [ASSET_001____]           │
│                                         │
├─────────────────────────────────────────┤
│ 生成された拠点管理番号:                  │
│ OSA_SV_ThinkPadX1Carbon_ABC123456_001   │
│                                         │
│ [リセット] [URL生成・保存]               │
└─────────────────────────────────────────┘
```

#### 3.3.2 フォーム設計

- **グリッドレイアウト**: 2 カラム構成
- **必須マーク**: 赤いアスタリスク
- **リアルタイム生成**: 入力変更時の即座更新
- **バリデーション**: エラー時の赤い枠線
- **動的カテゴリ**: 機種マスタから取得したカテゴリをドロップダウンに表示
- **連動フィルタ**: カテゴリ選択に応じたモデル一覧の自動更新
- **条件付き表示**: 端末系カテゴリ（Server、Desktop、Laptop、Tablet）選択時のみ端末属性セクションを表示
- **属性入力**: ソフトウェア、OS、資産管理番号の入力フィールド（端末系の場合は必須項目）

### 3.4 マスタ管理画面

#### 3.4.1 共通レイアウト

```
┌─────────────────────────────────────────┐
│ ⚙️ [マスタ名]管理                       │
├─────────────────────────────────────────┤
│ ➕ 新規追加                             │
├─────────────────────────────────────────┤
│ 🔍 [検索ボックス___]          [🔄更新]  │
├─────────────────────────────────────────┤
│ ┌─┬─────┬─────┬─────┬─────┬─────┐   │
│ │✓│項目1 │項目2 │項目3 │更新日│操作 │   │
│ ├─┼─────┼─────┼─────┼─────┼─────┤   │
│ │ │データ│データ│データ│日付 │編集 │   │
│ └─┴─────┴─────┴─────┴─────┴─────┘   │
└─────────────────────────────────────────┘
```

#### 3.4.2 モーダルダイアログ

- **新規追加/編集**: モーダルウィンドウ
- **確認ダイアログ**: 削除確認
- **オーバーレイ**: 半透明背景

#### 3.4.3 拠点マスタ管理画面

```
┌─────────────────────────────────────────┐
│ 📍 拠点マスタ管理                        │
├─────────────────────────────────────────┤
│ ➕ 新規拠点追加                          │
├─────────────────────────────────────────┤
│ 🔍 [検索ボックス___]          [🔄更新]   │
├─────────────────────────────────────────┤
│ ┌─┬──────┬────────┬──────┬──────┬─────┬────┬───┐
│ │✓│拠点ID│拠点コード│拠点名│管轄│ﾒｰﾙ│通知│操作│
│ ├─┼──────┼────────┼──────┼──────┼─────┼────┼───┤
│ │ │osaka │OSAKA   │大阪  │関西 │...│ON │編集│
│ ├─┼──────┼────────┼──────┼──────┼─────┼────┼───┤
│ │ │kobe  │KOBE    │神戸  │関西 │...│OFF │編集│
│ └─┴──────┴────────┴──────┴──────┴─────┴────┴───┘
└─────────────────────────────────────────┘
```

**拠点編集モーダル**:

```
┌─────────────────────────────────────────┐
│ 📍 拠点情報編集                          │
├─────────────────────────────────────────┤
│ 拠点ID: osaka (変更不可)                 │
│                                         │
│ 拠点コード*: [OSAKA________]             │
│ 拠点名*: [大阪営業所_______]             │
│ 管轄*: [関西_____________]               │
│                                         │
│ グループメールアドレス*:                 │
│ [osaka-group@example.com_________]       │
│                                         │
│ ステータス変更通知:                      │
│ ◉ 有効  ○ 無効                         │
│                                         │
│ ステータス: ◉ 有効  ○ 無効              │
│                                         │
│ 作成日: 2024/07/02 14:30:00 (自動)      │
│ 更新日: 2024/07/02 14:30:00 (自動)      │
├─────────────────────────────────────────┤
│            [キャンセル] [保存]           │
└─────────────────────────────────────────┘
```

**機能詳細**:
- **通知列**: ステータス変更通知のON/OFF状態を表示
- **インライン表示**: 一覧画面で通知設定を即座に確認
- **編集画面**: 通知設定を簡単にトグル切り替え
- **メール検証**: グループメールアドレスの形式チェック

### 3.5 設定画面

#### 3.5.1 レイアウト（debugMode = true時）

```
┌─────────────────────────────────────────┐
│ ⚙️ システム設定                         │
├─────────────────────────────────────────┤
│ [共通フォームURL] [通知設定] [その他...] │
├─────────────────────────────────────────┤
│ 🔧 デバッグモード: 有効                  │
│ ⚠️ 管理者専用設定                       │
│ この設定はシステム管理者のみ変更可能     │
├─────────────────────────────────────────┤
│ ■ 共通フォームURL設定                    │
│ 端末用共通フォームURL:                   │
│ [https://docs.google.com/forms...____]   │
│ [検証]                                  │
│                                         │
│ プリンタ用共通フォームURL:               │
│ [https://docs.google.com/forms...____]   │
│ [検証]                                  │
│                                         │
│ QR中間ページURL:                         │
│ [https://script.google.com/...____]      │
│ [検証]                                  │
├─────────────────────────────────────────┤
│ ■ ログ通知設定（開発用）                │
│ エラー通知メール:                        │
│ [admin@example.com,team@example.com___]  │
│ [テスト送信]                            │
│                                         │
│ アラート通知メール:                      │
│ [alert@example.com________________]      │
│ [テスト送信]                            │
├─────────────────────────────────────────┤
│ ■ ステータス変更通知設定（運用）        │
│ ※ 通知設定は拠点マスタで管理されます    │
│ 通知はPropertiesServiceでグローバル   │
│ ON/OFF可能です                          │
├─────────────────────────────────────────┤
│ [リセット] [設定を保存]                  │
└─────────────────────────────────────────┘
```

#### 3.5.2 レイアウト（debugMode = false時）

```
┌─────────────────────────────────────────┐
│ ⚙️ システム設定                         │
├─────────────────────────────────────────┤
│ [共通フォームURL] [通知設定] [その他...] │
├─────────────────────────────────────────┤
│ 🔒 デバッグモード: 無効                  │
│ ℹ️ 設定の変更にはデバッグモードを有効に  │
│    してください                         │
├─────────────────────────────────────────┤
│ ■ 共通フォームURL設定                    │
│ 端末用共通フォームURL:                   │
│ https://docs.google.com/forms/d/abc...   │
│ （読み取り専用）                        │
│                                         │
│ プリンタ用共通フォームURL:               │
│ https://docs.google.com/forms/d/xyz...   │
│ （読み取り専用）                        │
│                                         │
│ QR中間ページURL:                         │
│ https://script.google.com/macros/s/...   │
│ （読み取り専用）                        │
├─────────────────────────────────────────┤
│ ■ ステータス変更通知設定（運用）        │
│ ※ 通知設定は拠点マスタで管理されます    │
│ 通知はPropertiesServiceでグローバル   │
│ ON/OFF可能です                          │
├─────────────────────────────────────────┤
│ [リセット] [設定を保存]                  │
└─────────────────────────────────────────┘

※ ログ通知設定（エラー・アラート通知）は
   debugMode=falseの場合は表示されません
```

#### 3.5.3 デザイン仕様

- **条件付き表示**: 
  - debugMode=trueの場合: 全設定項目を表示・編集可能
  - debugMode=falseの場合: ログ通知設定を非表示、URL設定は読み取り専用
- **ステータス変更通知**: 拠点マスタで管理されるため、設定画面では情報表示のみ
- **視覚的区別**: 
  - 編集可能時: 白背景、青枠線
  - 読み取り専用時: グレー背景、グレー枠線、カーソル禁止
- **状態表示**: debugModeの状態を明確に表示（アイコン付き）
- **メール検証**: 有効なメールアドレス形式のリアルタイム検証
- **複数メール対応**: カンマ区切りで複数メールアドレスを入力可能（ログ通知のみ）

## 4. コンポーネント設計

### 4.1 ボタンコンポーネント

#### 4.1.1 基本ボタン

#### 4.1.2 サイズバリエーション

- **btn-sm**: 8px 16px（小）
- **btn-md**: 10px 20px（中・デフォルト）
- **btn-lg**: 12px 24px（大）

### 4.2 フォームコンポーネント

#### 4.2.1 入力フィールド

#### 4.2.2 バリデーション状態

- **success**: 緑の枠線
- **error**: 赤の枠線
- **warning**: オレンジの枠線

### 4.3 メッセージコンポーネント

#### 4.3.1 通知メッセージ

### 4.4 カードコンポーネント

#### 4.4.1 基本カード

## 5. レスポンシブデザイン

### 5.1 ブレークポイント

### 5.2 モバイル対応

#### 5.2.1 ナビゲーション

- **ハンバーガーメニュー**: モバイル時の折りたたみナビ
- **ドロワーメニュー**: サイドから出現するメニュー
- **タッチターゲット**: 最小 44px×44px のタッチ領域

#### 5.2.2 テーブル対応

- **横スクロール**: 小画面でのテーブル表示
- **カードビュー**: モバイル時のリスト表示
- **ページネーション**: タッチ操作に適したページング

### 5.3 タブレット対応

- **2 カラムレイアウト**: 適切な画面活用
- **フローティングボタン**: 追加アクション
- **スワイプ操作**: ナビゲーション操作

## 6. アクセシビリティ

### 6.1 基本原則

- **WCAG 2.1 AA 準拠**: 国際標準のアクセシビリティ
- **セマンティック HTML**: 適切な HTML 要素の使用
- **キーボード操作**: マウス無しでの完全操作

### 6.2 具体的対応

#### 6.2.1 視覚的配慮

- **色の使い分け**: 色だけに依存しない情報伝達
- **コントラスト**: 十分な色彩コントラスト（4.5:1 以上）
- **フォントサイズ**: 最小 14px、相対サイズ指定

#### 6.2.2 操作的配慮

- **フォーカス表示**: 明確なフォーカス状態
- **スキップリンク**: メインコンテンツへの直接移動
- **エラー説明**: 分かりやすいエラーメッセージ

#### 6.2.3 構造的配慮

- **見出し構造**: 適切な h1-h6 の階層
- **ランドマーク**: nav、main、aside 等の適切な使用
- **alt 属性**: 画像の代替テキスト

### 6.3 支援技術対応

- **スクリーンリーダー**: ARIA 属性の適切な使用
- **音声入力**: 音声コマンドでの操作
- **拡大ツール**: 200%拡大での利用可能性

## 7. パフォーマンス最適化

### 7.1 読み込み最適化

- **クリティカル CSS**: Above the fold のインライン CSS
- **遅延読み込み**: 画像・非重要リソースの遅延読み込み
- **圧縮**: CSS・JS の最小化

### 7.2 描画最適化

- **レイアウト計算**: Reflow/Repaint の最小化
- **アニメーション**: CSS transition と transform の活用
- **仮想化**: 長いリストの仮想スクロール

### 7.3 ユーザー体験最適化

- **スケルトン画面**: 読み込み中の骨格表示
- **プログレッシブ開示**: 段階的な情報表示
- **オフライン対応**: 基本機能のオフライン利用

## 8. エラー処理・フィードバック

### 8.1 エラー表示

- **インラインエラー**: フィールド直下のエラー表示
- **サマリーエラー**: フォーム上部でのエラー一覧
- **トーストエラー**: 一時的なエラー通知

### 8.2 成功フィードバック

- **成功メッセージ**: 操作完了の明確な通知
- **進捗表示**: 長時間処理の進捗状況
- **状態変化**: ボタン・フォームの状態表示

### 8.3 待機状態

- **ローディング**: スピナー・プログレスバー
- **ボタン無効化**: 重複実行防止
- **スケルトン**: コンテンツ読み込み中の表示

## 9. サマリーデータカード表示システム

### 9.1 概要

サマリーデータはカテゴリ別集計情報を視覚的なカード形式で表示し、拠点別機器台数の状況を一目で把握できるシステムです。

### 9.2 データ構造と処理ロジック

#### 9.2.1 期待されるデータ形式

- 行の第 2 列が数字パターン（`^\d+\.`）でカテゴリ開始を示す
- 第 1 列に拠点名、第 2 列以降にデバイスタイプ別台数
- 合計行は「合計」として識別

#### 9.2.2 カテゴリ検出ロジック

- 第 2 列の数字パターンでカテゴリ切り替えを検出
- カテゴリ名は第 1 列の値を使用
- 拠点データと合計データを分類して処理

### 9.3 カードデザインシステム

#### 9.3.1 カードレイアウト

- カードヘッダー: アイコン、カテゴリタイトル、合計数
- カードボディ: 拠点別データテーブル
- カードフッター: カテゴリ合計、詳細リンク

#### 9.3.2 カテゴリ別テーマ設定

- カテゴリごとに異なるカラーテーマを適用
- ブートストラップのカラーパレットを使用
- ダークモード対応のカラー調整

#### 9.3.3 アイコンマッピング

| カテゴリ                   | アイコン                    | カラー       | 意味           |
| -------------------------- | --------------------------- | ------------ | -------------- |
| 返却可能                   | fas fa-check-circle         | success (緑) | 返却可能・正常 |
| 商談や金額の問題で返却不可 | fas fa-exclamation-triangle | warning (黄) | 注意・警告     |
| お客様による返却拒否       | fas fa-user-times           | danger (赤)  | 問題・トラブル |
| HW 延長保守中              | fas fa-shield-alt           | info (青)    | 保護・保守     |

### 9.4 レスポンシブデザイン

#### 9.4.1 デスクトップ表示

- グリッドレイアウトで複数カードを水平配置
- カード幅: 300-400px で最適表示
- ホバーエフェクトでインタラクティブな操作感

#### 9.4.2 モバイル表示

- 単一列のスタッキングレイアウト
- タッチ操作に適したボタンサイズ
- スワイプジェスチャー対応

### 9.5 データ表示の最適化

#### 9.5.1 数値の視覚化

- データがあるセルにインジケーターアイコンを表示
- 数値の大きさに応じた視覚的強調
- ゼロ値と空値の適切な表示分け

#### 9.5.2 合計行の強調

- 合計行の背景色、フォントウエイトで強調
- カテゴリ全体の集計値を明確に表示
- 他のデータ行との視覚的区別

### 9.6 動的コンテンツ生成

#### 9.6.1 カード生成フロー

- データをカテゴリ別にグループ化
- 各カテゴリに対応するカード HTML を動的生成
- テーブルデータのフォーマットと挙動設定

#### 9.6.2 エラーハンドリング

- データ不整合時のフォールバック表示
- 空データの場合の適切なメッセージ
- ローディング状態の表示

### 9.7 管轄ベース表示機能

#### 9.7.1 管轄選択 UI

- 水平配置のボタングループ
- アクティブ状態の視覚的フィードバック
- 管轄名の動的表示と選択状態管理

#### 9.7.2 管轄別データ表示

- 選択された管轄に属する拠点のみ表示
- 管轄内合計の再計算と表示
- データがない管轄の適切なメッセージ表示

#### 9.7.3 管轄フィルタリング CSS

- ボタンのアクティブ/非アクティブ状態のスタイル
- ホバーエフェクトとトランジション
- レスポンシブデザイン対応

#### 9.7.4 フィルタリング機能

- 管轄選択時のアクティブボタン切り替え
- データフィルタリングとカードの再描画
- ローディング状態とエラーハンドリング

### 9.8 アクセシビリティ対応

#### 9.8.1 スクリーンリーダー対応

#### 9.7.2 キーボードナビゲーション

このサマリーカードシステムにより、複数のカテゴリにわたる集計データを直感的で理解しやすい形で表示できます。

## 10. ハイブリッド動的タブ表示システム

### 9.1 概要

ステータス別フィルタリングによる可変列数に対応した、レスポンシブなハイブリッド表示システム。デバイスサイズとデータ特性に応じて最適な表示方法を動的に選択します。

### 9.2 表示方式の自動選択

#### 9.2.1 判定ロジック

#### 9.2.2 表示方式の特徴

| 表示方式           | 適用条件                 | 特徴                     | 最適シーン           |
| ------------------ | ------------------------ | ------------------------ | -------------------- |
| **テーブル**       | デスクトップ + 列数 ≤8   | 標準的なテーブル表示     | 少数列での一覧表示   |
| **動的タブ**       | デスクトップ + 列数 9-15 | ステータス別タブ切り替え | 多列データの分類表示 |
| **アコーディオン** | デスクトップ + 列数>15   | 折りたたみ式セクション   | 大量列データ         |
| **カード**         | モバイル全般             | カード形式の個別表示     | タッチデバイス       |

### 10.3 動的タブ生成システム

#### 10.3.1 タブ構造の自動生成

- ステータス別にタブを動的生成
- タブラベルはステータス名から自動抽出
- アクティブタブの管理と状態同期

#### 10.3.2 タブコンテンツの動的描画

- タブ切り替え時のコンテンツ更新
- フィルタリングされたデータのテーブル表示
- ローディング状態とアニメーション

### 10.4 レスポンシブタブデザイン

#### 10.4.1 デスクトップ表示

- 水平タブリストでのステータス切り替え
- タブコンテンツエリアでのテーブル表示
- キーボードナビゲーション対応

#### 10.4.2 モバイル表示（カードレイアウト）

- アコーディオン形式でのステータス別表示
- タッチフレンドリーなインターフェース
- スワイプでのステータス切り替え機能

### 10.5 データ分析による最適化

#### 10.5.1 列重要度の自動判定

- データ入力率による列の重要度評価
- ユーザーの操作頻度に基づいた優先順位
- 動的な列順序の調整機能

#### 10.5.2 タブ表示の動的最適化

- データ量と表示パフォーマンスのバランス
- ユーザーの画面サイズに合わせた表示調整
- メモリ使用量とレンダリング速度の最適化

### 9.6 ユーザー操作の向上

#### 9.6.1 タブ間の快適な移動

#### 9.6.2 パフォーマンス最適化

### 9.7 実装ガイドライン

#### 9.7.1 段階的実装アプローチ

**Phase 1: 基本タブシステム**

**Phase 2: 動的生成機能**

**Phase 3: 最適化・UX 向上**

**Phase 4: 高度な機能**

#### 9.7.2 テスト戦略

このハイブリッド動的タブシステムにより、ステータスに応じた可変列数データを、ユーザーのデバイスとデータ特性に最適化された形で表示できます。
