# 非機能要件定義書

## 1. パフォーマンス要件

### 1.1 レスポンス時間

- **ページ読み込み**: 3 秒以内での初期表示完了
- **データ取得**: Google Sheets からのデータ取得は 5 秒以内
- **URL 生成**: 拠点管理番号から URL 生成は 1 秒以内
- **フォーム送信**: 設定保存・データ更新は 3 秒以内

### 1.2 同時利用性

- **想定ユーザー数**: 同時アクセス 10-20 名程度
- **データ整合性**: 複数ユーザーによる同時編集の制御
- **負荷分散**: Google Apps Script の実行時間制限内での処理

### 1.3 データ処理能力

- **マスタデータ**: 各マスタ 1,000 件程度の処理
- **検索・フィルタ**: 500 件以内での高速検索
- **バックグラウンド処理**: 非同期でのデータプリロード

## 2. 可用性要件

### 2.1 システム稼働率

- **目標稼働率**: 99%以上（Google Apps Script プラットフォーム依存）
- **ダウンタイム**: 計画メンテナンス時以外での長時間停止回避
- **障害復旧**: 24 時間以内での復旧対応

### 2.2 データバックアップ

- **Google Sheets**: Google Drive 標準のバックアップ機能活用
- **設定情報**: PropertiesService の冗長化検討
- **復旧手順**: マニュアル化された復旧プロセス

### 2.3 エラー処理

- **グレースフルデグラデーション**: 部分的機能停止時の代替手段
- **エラー通知**: 重要なエラーの管理者通知
  - 設定されたメールアドレスへの自動通知
  - エラーレベル別の通知制御（FATAL/ERROR/WARN）
  - 複数メールアドレス対応
- **アラート通知**: システムイベント・警告の通知
  - しきい値超過時の自動アラート
  - 重要操作の通知
- **ログ保持**: トラブルシューティング用のログ記録

## 3. セキュリティ要件

### 3.1 認証・認可

- **Google 認証**: Google Workspace アカウントでの統合認証
- **アクセス制御**: 組織内ユーザーのみのアクセス許可
- **権限管理**: 管理者権限と一般ユーザー権限の分離

### 3.2 データ保護

- **機密情報**: 機器情報・拠点情報の適切な保護
- **通信暗号化**: HTTPS 通信による データ保護
- **アクセスログ**: ユーザーアクセス履歴の記録

### 3.3 設定変更管理

- **管理者権限**: 重要設定変更は管理者のみ実行可能
- **変更確認**: 3 段階確認による誤操作防止
- **変更履歴**: 設定変更履歴の記録・追跡

## 4. 運用保守性要件

### 4.1 保守性

- **コード構造**: モジュール化された保守しやすいコード
- **ドキュメント**: 充実した技術文書・運用手順書
- **バージョン管理**: Git によるソースコード管理

### 4.2 監視・ログ

- **システムログ**: 各機能の実行ログ記録
- **エラーログ**: エラー発生時の詳細情報記録
- **パフォーマンスログ**: 処理時間・リソース使用量の記録
- **デバッグログ表示**: 
  - debugModeがtrueの場合のみフロントエンドにログコンソールを表示
  - API呼び出し、データ取得、エラー情報をリアルタイム表示
  - ログレベル別の色分け表示（ERROR: 赤、WARN: 黄、INFO: 青、DEBUG: 灰）
  - ログのクリア、フィルタリング、エクスポート機能
  - 画面右下に折りたたみ可能なフローティングコンソールとして表示

### 4.3 更新・デプロイ

- **デプロイ手順**: 標準化されたデプロイプロセス
- **ロールバック**: 問題発生時の迅速な巻き戻し機能
- **テスト環境**: 本番環境と分離されたテスト環境

## 5. ユーザビリティ要件

### 5.1 操作性

- **直感的 UI**: 専門知識不要での操作可能
- **エラー防止**: 誤操作を防ぐ UI 設計
- **フィードバック**: ユーザー操作に対する適切な応答

### 5.2 アクセシビリティ

- **Web アクセシビリティ**: WCAG 2.1 AA 準拠
- **モバイル対応**: スマートフォン・タブレットでの利用
- **ブラウザ対応**: 主要ブラウザでの動作保証

### 5.3 学習容易性

- **操作ガイド**: 各機能の使い方説明
- **ヘルプ機能**: コンテキストヘルプの提供
- **エラーメッセージ**: 分かりやすいエラー説明

## 6. 互換性要件

### 6.1 ブラウザ対応

- **対応ブラウザ**: Chrome、Firefox、Safari、Edge（最新版）
- **レガシー対応**: IE11 は対象外
- **モバイルブラウザ**: iOS Safari、Android Chrome

### 6.2 デバイス対応

- **PC**: Windows、macOS
- **タブレット**: iPad、Android タブレット
- **スマートフォン**: iOS、Android

### 6.3 統合性

- **Google Workspace**: Sheets、Drive、Apps Script との連携
- **Google Forms**: 外部フォームとの URL 連携
- **QR コード**: 標準的な QR コードリーダーでの読み取り

## 7. 拡張性要件

### 7.1 データ拡張

- **マスタデータ**: 新しいマスタテーブルの追加容易性
- **項目追加**: 既存マスタへの項目追加対応
- **データ移行**: 大規模データ移行時の手順整備

### 7.2 機能拡張

- **新機能追加**: モジュール構造による機能拡張
- **API 連携**: 外部システムとの連携可能性
- **レポート機能**: 分析・レポート機能の追加余地

### 7.3 運用拡張

- **ユーザー数**: 利用者増加に対応可能な設計
- **拠点数**: 管理拠点数の増加対応
- **データ量**: 大容量データ処理への対応

## 8. 制約事項

### 8.1 技術制約

- **Google Apps Script**: 実行時間 6 分制限
- **Google Sheets**: 最大 500 万セルの制限
- **PropertiesService**: 設定データ保存容量制限

### 8.2 運用制約

- **Google Workspace**: 組織の Google Workspace アカウント必須
- **インターネット**: 常時インターネット接続必須
- **ブラウザ**: JavaScript 有効化必須

### 8.3 セキュリティ制約

- **データ保存**: Google サーバー上のデータ保存
- **アクセス制御**: Google 認証システム依存
- **監査ログ**: Google 標準ログ機能の活用

## 9. 移行要件

### 9.1 運用移行

- **運用手順書**: 新システムでの運用手順整備
- **障害対応**: トラブルシューティング手順書
- **保守体制**: システム保守・サポート体制の確立
