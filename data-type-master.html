<!-- data-type-master.html - データタイプマスタ管理ページ -->
<div class="container">
  <h1>データタイプマスタ管理</h1>
  
  <div class="page-description">
    <p>スプレッドシートビューアーの表示形式を管理します。データタイプごとに表示する列やフィルタ条件を設定できます。</p>
  </div>
  
  <!-- 操作ボタン -->
  <div class="action-buttons">
    <button class="btn btn-primary" onclick="showAddDataTypeModal()">
      <i class="fas fa-plus"></i> 新規追加
    </button>
    <button class="btn btn-secondary" onclick="refreshDataTypeList()">
      <i class="fas fa-sync-alt"></i> 更新
    </button>
  </div>
  
  <!-- データタイプ一覧 -->
  <div class="data-type-list">
    <table class="table" id="dataTypeTable">
      <thead>
        <tr>
          <th>データタイプID</th>
          <th>データタイプ名</th>
          <th>説明</th>
          <th>表示順序</th>
          <th>ステータス</th>
          <th>更新日</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody id="dataTypeTableBody">
        <tr>
          <td colspan="7" class="text-center">読み込み中...</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <!-- 追加/編集モーダル -->
  <div id="dataTypeModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="dataTypeModalTitle">データタイプを追加</h5>
        <button class="close" onclick="closeDataTypeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="dataTypeForm">
          <input type="hidden" id="editDataTypeId" value="">
          
          <div class="form-group">
            <label for="dataTypeId">データタイプID <span class="required">*</span></label>
            <input type="text" class="form-control" id="dataTypeId" placeholder="例: CUSTOM_VIEW" pattern="^[A-Z_]+$" required>
            <small class="form-text">大文字英字とアンダースコアのみ使用可能</small>
          </div>
          
          <div class="form-group">
            <label for="dataTypeName">データタイプ名 <span class="required">*</span></label>
            <input type="text" class="form-control" id="dataTypeName" placeholder="例: カスタムビュー" required>
          </div>
          
          <div class="form-group">
            <label for="description">説明</label>
            <textarea class="form-control" id="description" rows="3" placeholder="このデータタイプの用途を説明してください"></textarea>
          </div>
          
          <div class="form-group">
            <label for="displayOrder">表示順序 <span class="required">*</span></label>
            <input type="number" class="form-control" id="displayOrder" min="1" value="99" required>
          </div>
          
          <div class="form-group">
            <label for="filterCondition">フィルタ条件</label>
            <input type="text" class="form-control" id="filterCondition" placeholder="例: status=active">
            <small class="form-text">表示データの絞り込み条件</small>
          </div>
          
          <div class="form-group">
            <label for="dataSourceConfig">データソース設定（JSON）</label>
            <textarea class="form-control" id="dataSourceConfig" rows="5" placeholder='{"sourceSheets": ["端末マスタ", "プリンタマスタ"]}'></textarea>
            <small class="form-text">データ取得元の設定をJSON形式で入力</small>
          </div>
          
          <div class="form-group">
            <label for="displayColumnConfig">表示列設定（JSON）</label>
            <textarea class="form-control" id="displayColumnConfig" rows="5" placeholder='{"columns": ["拠点管理番号", "機種名", "ステータス"]}'></textarea>
            <small class="form-text">表示する列の設定をJSON形式で入力</small>
          </div>
          
          <div class="form-group">
            <label for="status">ステータス <span class="required">*</span></label>
            <select class="form-control" id="status" required>
              <option value="active">有効</option>
              <option value="inactive">無効</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeDataTypeModal()">キャンセル</button>
        <button type="button" class="btn btn-primary" onclick="saveDataType()">
          <i class="fas fa-save"></i> 保存
        </button>
      </div>
    </div>
  </div>
  
  <!-- 詳細表示モーダル -->
  <div id="dataTypeDetailModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">データタイプ詳細</h5>
        <button class="close" onclick="closeDataTypeDetailModal()">&times;</button>
      </div>
      <div class="modal-body" id="dataTypeDetailContent">
        <!-- 詳細情報がここに表示される -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeDataTypeDetailModal()">閉じる</button>
      </div>
    </div>
  </div>
</div>